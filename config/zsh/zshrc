# --- Aliases ---
alias ll="ls -l"
alias la="ls -la"
alias gs="git status"
alias gc="git commit"
alias gp="git push"
alias gl="git pull"

# --- History ---
HISTSIZE=50000
SAVEHIST=50000
HISTFILE="$HOME/.zsh_history"
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_VERIFY
setopt HIST_FIND_NO_DUPS
setopt HIST_SAVE_NO_DUPS
setopt EXTENDED_HISTORY
setopt INC_APPEND_HISTORY_TIME
unsetopt SHARE_HISTORY
unsetopt INC_APPEND_HISTORY

# --- Directory navigation ---
setopt AUTO_CD
setopt AUTO_PUSHD
setopt PUSHD_IGNORE_DUPS
setopt PUSHD_MINUS

# --- Completion ---
autoload -Uz compinit
if [[ -n $HOME/.zcompdump(#qN.mh+24) ]]; then
  compinit -u
else
  compinit -u -C
fi
zstyle ':completion:*' menu select
zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}'

# --- Key bindings ---
bindkey "^[[A" up-line-or-search
bindkey "^[[B" down-line-or-search
bindkey '^[[H' beginning-of-line
bindkey '^[[F' end-of-line
bindkey '^[[3~' delete-char
bindkey '^[[1;5C' forward-word
bindkey '^[[1;5D' backward-word

# --- fzf ---
if command -v fzf &>/dev/null; then
  export FZF_DEFAULT_OPTS="--height 40% --layout=reverse --border"
  export FZF_CTRL_R_OPTS="--sort --exact"
  for f in /usr/share/doc/fzf/examples/key-bindings.zsh \
           /usr/share/fzf/key-bindings.zsh \
           "${HOMEBREW_PREFIX:-/opt/homebrew}/opt/fzf/shell/key-bindings.zsh"; do
    [[ -f "$f" ]] && source "$f" && break
  done
  for f in /usr/share/doc/fzf/examples/completion.zsh \
           /usr/share/fzf/completion.zsh \
           "${HOMEBREW_PREFIX:-/opt/homebrew}/opt/fzf/shell/completion.zsh"; do
    [[ -f "$f" ]] && source "$f" && break
  done
fi

# --- UV completion ---
if command -v uv &>/dev/null; then
  source <(uv generate-shell-completion zsh)
fi

# --- Misc ---
export CLICOLOR=1
export LSCOLORS=ExFxBxDxCxegedabagacad
export GPG_TTY=$(tty)
export EDITOR=nvim
